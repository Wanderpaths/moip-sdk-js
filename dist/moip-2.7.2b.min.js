/*! moip-2.7.2b.js - build date: 2017-09-27 */
!function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={calculateAccount:function(a){for(var b=a.split(""),c=0,d=0;d<b.length;d++)seq=9-d,c+=parseInt(b[d])*seq;return this.module(c)},calculateAgency:function(a){for(var b=a.split(""),c=0,d=0;d<b.length;d++)seq=5-d,c+=parseInt(b[d])*seq;return this.module(c)},module:function(a){var b=11-a%11;return 10===b?"X":11===b?"0":b.toString()}},c.BancoDoBrasilCheckNumberCalculator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={agencyNumberIsValid:function(a){return c.CommonBankAccountValidator.agencyNumberIsValid(a)},agencyCheckNumberIsValid:function(a){return a.length==this.agencyCheckNumberLength()&&c.CommonBankAccountValidator.agencyCheckNumberIsValid(a)},accountNumberIsValid:function(a){return a.length==this.accountNumberLength()&&c.CommonBankAccountValidator.accountNumberIsValid(a)},accountCheckNumberIsValid:function(a){return c.CommonBankAccountValidator.accountCheckNumberIsValid(a)},agencyCheckNumberMatch:function(a){var b=c.BancoDoBrasilCheckNumberCalculator.calculateAgency(a.agencyNumber);return b===a.agencyCheckNumber.toUpperCase()},accountCheckNumberMatch:function(a){var b=c.BancoDoBrasilCheckNumberCalculator.calculateAccount(a.accountNumber);return b===a.accountCheckNumber.toUpperCase()},agencyNumberMsgError:function(){return c.CommonBankAccountValidator.agencyNumberMsgError()},agencyCheckNumberMsgError:function(){return c.CommonBankAccountValidator.agencyCheckNumberMsgError(this.agencyCheckNumberLength())},accountNumberMsgError:function(){return c.CommonBankAccountValidator.accountNumberMsgError(this.accountNumberLength())},agencyCheckNumberLength:function(){return 1},accountNumberLength:function(){return 8}},c.BancoDoBrasilValidator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={validator:function(a){var b={"001":c.BancoDoBrasilValidator,237:c.BradescoValidator,341:c.ItauValidator,"033":c.SantanderValidator,745:c.CitibankValidator,399:c.HSBCValidator};return b[a]?b[a]:c.GenericBankAccountValidator},validate:function(a){var b=[],d=this.validator(a.bankNumber);c.GenericBankAccountValidator.bankNumberIsValid(a.bankNumber)||b.push({description:"Banco inválido",code:"INVALID_BANK_NUMBER"}),d.agencyNumberIsValid(a.agencyNumber)||b.push({description:d.agencyNumberMsgError(),code:"INVALID_AGENCY_NUMBER"}),d.agencyCheckNumberIsValid(a.agencyCheckNumber)||b.push({description:d.agencyCheckNumberMsgError(),code:"INVALID_AGENCY_CHECK_NUMBER"}),d.accountNumberIsValid(a.accountNumber)||b.push({description:d.accountNumberMsgError(),code:"INVALID_ACCOUNT_NUMBER"}),d.accountCheckNumberIsValid(a.accountCheckNumber)||b.push({description:"Dígito da conta corrente inválido",code:"INVALID_ACCOUNT_CHECK_NUMBER"}),d.agencyNumberIsValid(a.agencyNumber)&&d.agencyCheckNumberIsValid(a.agencyCheckNumber)&&(d.agencyCheckNumberMatch(a)||b.push({description:"Dígito da agência não corresponde ao número da agência preenchido",code:"AGENCY_CHECK_NUMBER_DONT_MATCH"})),d.accountNumberIsValid(a.accountNumber)&&d.accountCheckNumberIsValid(a.accountCheckNumber)&&(d.accountCheckNumberMatch(a)||b.push({description:"Dígito da conta não corresponde ao número da conta/agência preenchido",code:"ACCOUNT_CHECK_NUMBER_DONT_MATCH"})),0===b.length?a.valid():a.invalid({errors:b})}},c.BankAccount=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={calculateAccount:function(a){for(var b=a.split(""),c=0,d=0;d<b.length;d++){var e=parseInt(b[d]);c+=this.multiplyAccordingWeight(e,d)}return this.accountModule(c)},multiplyAccordingWeight:function(a,b){var c=[2,7,6,5,4,3,2];return a*c[b]},accountModule:function(a){var b=a%11;return 0===b?"0":1===b?"P":(11-b).toString()},calculateAgency:function(a){for(var b=a.split(""),c=0,d=0;d<b.length;d++)seq=5-d,c+=parseInt(b[d])*seq;return this.agencyModule(c)},agencyModule:function(a){var b=11-a%11;return 10===b?"P":11===b?"0":b.toString()}},c.BradescoCheckNumberCalculator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={agencyNumberIsValid:function(a){return c.CommonBankAccountValidator.agencyNumberIsValid(a)},agencyCheckNumberIsValid:function(a){return a.length==this.agencyCheckNumberLength()&&c.CommonBankAccountValidator.agencyCheckNumberIsValid(a)},accountNumberIsValid:function(a){return a.length==this.accountNumberLength()&&c.CommonBankAccountValidator.accountNumberIsValid(a)},accountCheckNumberIsValid:function(a){return c.CommonBankAccountValidator.accountCheckNumberIsValid(a)},agencyCheckNumberMatch:function(a){var b=c.BradescoCheckNumberCalculator.calculateAgency(a.agencyNumber),d=a.agencyCheckNumber.toUpperCase();return"0"===d?b===d||"P"===b:b===d},accountCheckNumberMatch:function(a){var b=c.BradescoCheckNumberCalculator.calculateAccount(a.accountNumber),d=a.accountCheckNumber.toUpperCase();return"0"===d?b===d||"P"===b:b===d},agencyNumberMsgError:function(){return c.CommonBankAccountValidator.agencyNumberMsgError()},agencyCheckNumberMsgError:function(){return c.CommonBankAccountValidator.agencyCheckNumberMsgError(this.agencyCheckNumberLength())},accountNumberMsgError:function(){return c.CommonBankAccountValidator.accountNumberMsgError(this.accountNumberLength())},agencyCheckNumberLength:function(){return 1},accountNumberLength:function(){return 7}},c.BradescoValidator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={agencyNumberIsValid:function(a){return c.CommonBankAccountValidator.agencyNumberIsValid(a)},agencyCheckNumberIsValid:function(a){return void 0===a||""===a},accountNumberIsValid:function(a){return a.length==this.accountNumberLength()&&c.CommonBankAccountValidator.accountNumberIsValid(a)},accountCheckNumberIsValid:function(a){return c.CommonBankAccountValidator.accountCheckNumberIsValid(a)},agencyCheckNumberMatch:function(){return!0},accountCheckNumberMatch:function(){return!0},agencyNumberMsgError:function(){return c.CommonBankAccountValidator.agencyNumberMsgError()},agencyCheckNumberMsgError:function(){return c.CommonBankAccountValidator.agencyCheckNumberMsgError()},accountNumberMsgError:function(){return c.CommonBankAccountValidator.accountNumberMsgError(this.accountNumberLength())},accountNumberLength:function(){return 7}},c.CitibankValidator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={agencyNumberIsValid:function(a){return/^(?!0000)([0-9]{4})$/.test(a)},agencyCheckNumberIsValid:function(a){return/^[a-zA-Z0-9]{0,1}$/.test(a)},accountNumberIsValid:function(a){return/^[0-9]{1,12}$/.test(a)&&parseInt(a)>0},accountCheckNumberIsValid:function(a){return/^[a-zA-Z0-9]{1}$/.test(a)},agencyNumberMsgError:function(a){return void 0===a&&(a=this.agencyNumberLength()),"A agência deve conter "+a+" números. Complete com zeros a esquerda se necessário."},agencyCheckNumberMsgError:function(a){return void 0===a||0===a?"O dígito da agência deve ser vazio":1===a?"O dígito da agência deve conter 1 dígito":"O dígito da agência deve conter "+a+" números. Complete com zeros a esquerda se necessário."},accountNumberMsgError:function(a){return"A conta corrente deve conter "+a+" números. Complete com zeros a esquerda se necessário."},agencyNumberLength:function(){return 4}},c.CommonBankAccountValidator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={bankNumberIsValid:function(a){return/^([0-9-A-Za-x]{3,5})$/.test(a)},agencyNumberIsValid:function(a){return/^[0-9]{1,5}$/.test(a)&&parseInt(a)>0},agencyCheckNumberIsValid:function(a){return/^[a-zA-Z0-9]{0,2}$/.test(a)},accountNumberIsValid:function(a){return/^[0-9]{1,12}$/.test(a)&&parseInt(a)>0},accountCheckNumberIsValid:function(a){return/^[a-zA-Z0-9]{0,2}$/.test(a)},agencyCheckNumberMatch:function(){return!0},accountCheckNumberMatch:function(){return!0},agencyNumberMsgError:function(){return"Agência inválida"},agencyCheckNumberMsgError:function(){return"Dígito da agência inválido"},accountNumberMsgError:function(){return"Conta corrente inválida"}},c.GenericBankAccountValidator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={agencyNumberIsValid:function(a){return c.CommonBankAccountValidator.agencyNumberIsValid(a)},agencyCheckNumberIsValid:function(a){return void 0===a||""===a},accountNumberIsValid:function(a){return a.length==this.accountNumberLength()&&c.CommonBankAccountValidator.accountNumberIsValid(a)},accountCheckNumberIsValid:function(){return!0},agencyCheckNumberMatch:function(){return!0},accountCheckNumberMatch:function(){return!0},agencyNumberMsgError:function(){return c.CommonBankAccountValidator.agencyNumberMsgError()},agencyCheckNumberMsgError:function(){return c.CommonBankAccountValidator.agencyCheckNumberMsgError()},accountNumberMsgError:function(){return c.CommonBankAccountValidator.accountNumberMsgError(this.accountNumberLength())},accountNumberLength:function(){return 6}},c.HSBCValidator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={calculate:function(a,b){for(var c=(a+b).split(""),d=0,e=0,f=0;f<c.length;f++){var g=parseInt(c[f]);e=this.multiplyAccordingParity(g,f),e=this.adjustAccordingLength(e),d+=e}return this.module(d)},multiplyAccordingParity:function(a,b){return a*(b%2===0?2:1)},adjustAccordingLength:function(a){if(a>9){var b=a.toString().split("");a=0;for(var c=0;c<b.length;c++)a+=parseInt(b[c])}return a},module:function(a){var b=a%10;return 0===b?"0":(10-b).toString()}},c.ItauCheckNumberCalculator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={agencyNumberIsValid:function(a){return c.CommonBankAccountValidator.agencyNumberIsValid(a)},agencyCheckNumberIsValid:function(a){return void 0===a||""===a},accountNumberIsValid:function(a){return a.length==this.accountNumberLength()&&c.CommonBankAccountValidator.accountNumberIsValid(a)},accountCheckNumberIsValid:function(a){return c.CommonBankAccountValidator.accountCheckNumberIsValid(a)},agencyCheckNumberMatch:function(){return!0},accountCheckNumberMatch:function(a){var b=c.ItauCheckNumberCalculator.calculate(a.agencyNumber,a.accountNumber);return b===a.accountCheckNumber},agencyNumberMsgError:function(){return c.CommonBankAccountValidator.agencyNumberMsgError()},agencyCheckNumberMsgError:function(){return c.CommonBankAccountValidator.agencyCheckNumberMsgError()},accountNumberMsgError:function(){return c.CommonBankAccountValidator.accountNumberMsgError(this.accountNumberLength())},accountNumberLength:function(){return 5}},c.ItauValidator=b()}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={agencyNumberIsValid:function(a){return c.CommonBankAccountValidator.agencyNumberIsValid(a)},agencyCheckNumberIsValid:function(a){return void 0===a||""===a},accountNumberIsValid:function(a){return a.length==this.accountNumberLength()&&c.CommonBankAccountValidator.accountNumberIsValid(a)},accountCheckNumberIsValid:function(a){return c.CommonBankAccountValidator.accountCheckNumberIsValid(a)},agencyCheckNumberMatch:function(){return!0},accountCheckNumberMatch:function(){return!0},agencyNumberMsgError:function(){return c.CommonBankAccountValidator.agencyNumberMsgError()},agencyCheckNumberMsgError:function(){return c.CommonBankAccountValidator.agencyCheckNumberMsgError()},accountNumberMsgError:function(){return c.CommonBankAccountValidator.accountNumberMsgError(this.accountNumberLength())},accountNumberLength:function(){return 8}},c.SantanderValidator=b()}(window),function(a){var b=a.Moip||{};a.Moip=b,b.Calculator={pricing:function(a){return this.buildJson(a)},buildJson:function(a){var b,c=[],d=[],e=[],f=[];if(b=this._calculateTransactionTax(a.amount,a.transaction_percentage,a.fixed),void 0!==a.antecipation_percentage&&void 0!==a.floating&&void 0!==a.installment){for(var g=0;11>=g;g++)c[g]=this._calculateInstallmentValue(a.amount,g+1),d[g]=this._calculateAntecipationPercentage(b,a,g,a.amount),e[g]=this._calculateTotalTax(d[g],b),f[g]=this._calculateLiquidValue(a.amount,e[g]);return{amount:a.amount,transaction_tax:b,antecipation_percentage:d,total_tax:e,liquid_value:f,installment_value:c}}return f=this._calculateLiquidValue(a.amount,b),{amount:a.amount,transaction_tax:b,liquid_value:f}},pricingWithInterest:function(a){for(var b=[],c=[],d=[],e=[],f=[],g=[],h=[],i=1;12>=i;i++)b[i-1]=this._calculateInterestRate(a.amount,a.interest_rate,i),c[i-1]=this._calculateAmount(b[i-1],i),d[i-1]=this._calculateTransactionTax(c[i-1],a.transaction_percentage,a.fixed),e[i-1]=this._calculateAntecipationPercentage(d[i-1],a,i-1,c[i-1]),f[i-1]=this._calculateAntecipationPercentageFromAmount(c[i-1],e[i-1]),g[i-1]=this._calculateTotalTax(e[i-1],d[i-1]),h[i-1]=this._calculateLiquidValue(c[i-1],g[i-1]);return{amount:c,transaction_tax:d,antecipation_percentage:f,total_tax:g,liquid_value:h,installment_value:b}},_calculateAntecipationPercentageFromAmount:function(a,b){return parseFloat(100*b/(a/100)).toFixed(2)},_calculateTransactionTax:function(a,b,c){return parseFloat(((a*(b/100)+c)/100).toFixed(2))},_calculateAntecipationPercentage:function(a,b,c,d){return parseFloat((parseFloat(b.antecipation_percentage/100/30*(30+15*c-b.floating))*parseFloat(d/100-a)).toFixed(2))},_calculateTotalTax:function(a,b){return parseFloat((a+b).toFixed(2))},_calculateLiquidValue:function(a,b){return parseFloat((a/100-parseFloat(b)).toFixed(2))},_calculateInstallmentValue:function(a,b){return parseFloat((a/b/100).toFixed(2))},_calculateInterestRate:function(a,b,c){return parseFloat(1===c?a/100:(this._coefficient(b,c)*(a/100)).toFixed(2))},_calculateAmount:function(a,b){return parseFloat(100*(a*b).toFixed(2))},_coefficient:function(a,b){return parseFloat((a/100/(1-1/Math.pow(a/100+1,b))).toFixed(10))}}}(window),function(a){function b(a){this.number=c.Validator.normalizeCardNumber(a.number),this.cvc=a.cvc,this.expMonth=a.expMonth,this.expYear=a.expYear,this.pubKey=a.pubKey}var c=a.Moip||{};a.Moip=c,b.prototype={hash:function(){if(!(this.pubKey&&this.number&&this.cvc&&this.expMonth&&this.expYear))return null;var a=new JSEncrypt({default_key_size:2048});a.setPublicKey(this.pubKey);var b="number="+this.number+"&";return b+="cvc="+this.cvc+"&",b+="expirationMonth="+this.expMonth+"&",b+="expirationYear="+this.expYear,a.encrypt(b)},isValid:function(){if(!(this.pubKey&&this.number&&this.cvc&&this.expMonth&&this.expYear))return!1;var a=c.Validator.isValid(this.number),b=c.Validator.isSecurityCodeValid(this.number,this.cvc),d=c.Validator.isExpiryDateValid(this.expMonth,this.expYear);return a&&b&&d},cardType:function(){return type=c.Validator.cardType(this.number),type?type.brand:null},_setPubKey:function(a){this.pubKey=a},_setNumber:function(a){this.number=a},_setCvc:function(a){this.cvc=a},_setExpMonth:function(a){this.expMonth=a},_setExpYear:function(a){this.expYear=a}},c.CreditCard=b}(window),function(a){function b(){return this instanceof b?void 0:new b}var c=a.Moip||{};a.Moip=c,b.prototype={_eloBins:["401178","401179","431274","438935","451416","457393","457631","457632","504175","627780","636297","636368"],_eloBinRanges:[[506699,506778],[509e3,509999],[650031,650033],[650035,650051],[650405,650439],[650485,650538],[650541,650598],[650700,650718],[650720,650727],[650901,650920],[651652,651679],[655e3,655019],[655021,655058]],_hiperBins:["637095","637612","637599","637609","637568"],_hipercardBins:["606282","384100","384140","384160"],_masterCardRanges:[222100,272099],_isInEloBinRanges:function(a){for(var b=parseInt(a),c=0;c<this._eloBinRanges.length;c++){var d=this._eloBinRanges[c][0],e=this._eloBinRanges[c][1];if(b>=d&&e>=b)return!0}return!1},_isInMasterCardRanges:function(a){for(var b=parseInt(a),c=0;c<this._masterCardRanges.length;c+=2){var d=this._masterCardRanges[c],e=this._masterCardRanges[c+1];if(b>=d&&e>=b)return!0}return!1},normalizeCardNumber:function(a){return a?(a+="",a.replace(/[\s+|\.|\-]/g,"")):a},isValid:function(a){var c=this.normalizeCardNumber(a),d=b.prototype.cardType(c);if(d){if("HIPERCARD"===d.brand)return!0;for(var e=0,f=2-c.length%2;f<=c.length;f+=2)e+=parseInt(c.charAt(f-1),10);for(f=c.length%2+1;f<c.length;f+=2){var g=2*parseInt(c.charAt(f-1),10);e+=10>g?g:g-9}return e%10===0?!0:!1}return!1},cardType:function(a,b){var c=this,d=this.normalizeCardNumber(a),e=function(a){return a.substring(0,6)},f={VISA:{matches:function(a){return/^4\d{15}$/.test(a)}},MASTERCARD:{matches:function(a){return/^5[1-5]\d{14}$/.test(a)||null!==a&&16==a.length&&c._isInMasterCardRanges(e(a))}},AMEX:{matches:function(a){return/^3[4,7]\d{13}$/.test(a)}},DINERS:{matches:function(a){return/^3[0,6,8]\d{12}$/.test(a)}},HIPERCARD:{matches:function(a){return null!==a&&(16==a.length||19==a.length)&&c._hipercardBins.indexOf(e(a))>-1}},ELO:{matches:function(a){return null!==a&&16==a.length&&(c._eloBins.indexOf(e(a))>-1||c._isInEloBinRanges(e(a)))}},HIPER:{matches:function(a){return null!==a&&a.length>=6&&c._hiperBins.indexOf(e(a))>-1}}},g={VISA:{matches:function(a){return/^4\d{3}\d*$/.test(a)}},MASTERCARD:{matches:function(a){return/^5[1-5]\d{4}\d*$/.test(a)||null!==a&&16==a.length&&c._isInMasterCardRanges(e(a))}},AMEX:{matches:function(a){return/^3[4,7]\d{2}\d*$/.test(a)}},DINERS:{matches:function(a){return/^3(?:0[0-5]|[68][0-9])+\d*$/.test(a)}},HIPERCARD:{matches:function(a){return null!==a&&a.length>=6&&c._hipercardBins.indexOf(e(a))>-1}},ELO:{matches:function(a){return null!==a&&a.length>=6&&(c._eloBins.indexOf(e(a))>-1||c._isInEloBinRanges(e(a)))}},HIPER:{matches:function(a){return null!==a&&a.length>=6&&c._hiperBins.indexOf(e(a))>-1}}};return b&&(f=g),f.ELO.matches(d)?{brand:"ELO"}:f.HIPER.matches(d)?{brand:"HIPER"}:f.VISA.matches(d)?{brand:"VISA"}:f.MASTERCARD.matches(d)?{brand:"MASTERCARD"}:f.AMEX.matches(d)?{brand:"AMEX"}:f.HIPERCARD.matches(d)?{brand:"HIPERCARD"}:f.DINERS.matches(d)?{brand:"DINERS"}:null},isSecurityCodeValid:function(a,b){var d=c.Validator.cardType(a);if(!d)return!1;var e="AMEX"===d.brand?4:3,f=new RegExp("[0-9]{"+e+"}");return b.length===e&&f.test(b)},isExpiryDateValid:function(a,c){return a=parseInt(a,10),c=parseInt(c,10),1>a||a>12?!1:2!==(c+"").length&&4!==(c+"").length?!1:(2===(c+"").length&&(c=c>80?"19"+c:"20"+c),1e3>c||c>=3e3?!1:!b.prototype.isExpiredDate(a,c))},isExpiredDate:function(a,b){var c=new Date,d=("0"+(c.getMonth()+1)).slice(-2),e=c.getFullYear();if(a=("0"+a).slice(-2),2===b.toString().length){if(b>80)return!0;b="20"+b}var f=e+d,g=b+a;return parseInt(g,10)<parseInt(f,10)}},c.Validator=b()}(window);